<!DOCTYPE html>
            <html lang="en">
            <head>
                <meta name="viewport" content="width=device-width" />
                <title>L05 Intro to Parallelism</title>
                <meta charset="utf-8" />

                <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.12.18/frontend/editor.css" type="text/css" />
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.12.18/frontend/treeview.css" type="text/css" />
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fonsp/Pluto.jl@0.12.18/frontend/hide-ui.css" type="text/css" />
                <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.58.1/lib/codemirror.min.css" type="text/css" />

                <style id="MJX-SVG-styles">
mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}
</style>
            </head>
            <body>
                <main><preamble><button class="runallchanged" title="Save and run all changed cells"><span></span></button></preamble><pluto-notebook id="0ec05740-55a7-11eb-0fd3-3f02ed46e2ae"><pluto-cell class="code_folded " id="b51b7e9b-df76-4e57-83e6-03f78e0b1482"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="toc-aside" id="toc">
        <div class="markdown">
            <p class="toc-title">Table of Contents</p>
            <div class="toc-content" id="toc-content"><div class="toc-row">
                                    <a class="H1-indent" href="#29033614-97ca-4b7f-b946-ebdb91edd088" onmouseover="(()=>{document.getElementById('29033614-97ca-4b7f-b946-ebdb91edd088').firstElementChild.classList.add('highlight-pluto-cell-shoulder')})()" onmouseout="(()=>{document.getElementById('29033614-97ca-4b7f-b946-ebdb91edd088').firstElementChild.classList.remove('highlight-pluto-cell-shoulder')})()" onclick="((e)=>{
                                            e.preventDefault();
                                            document.getElementById('29033614-97ca-4b7f-b946-ebdb91edd088').scrollIntoView({
                                                behavior: 'smooth', 
                                                block: 'center'
                                            });
                                        })(event)"> Let's talk about memory</a>
                                </div><div class="toc-row">
                                    <a class="H1-indent" href="#535b82b2-942d-4834-9a94-8d0ee8282b99" onmouseover="(()=>{document.getElementById('535b82b2-942d-4834-9a94-8d0ee8282b99').firstElementChild.classList.add('highlight-pluto-cell-shoulder')})()" onmouseout="(()=>{document.getElementById('535b82b2-942d-4834-9a94-8d0ee8282b99').firstElementChild.classList.remove('highlight-pluto-cell-shoulder')})()" onclick="((e)=>{
                                            e.preventDefault();
                                            document.getElementById('535b82b2-942d-4834-9a94-8d0ee8282b99').scrollIntoView({
                                                behavior: 'smooth', 
                                                block: 'center'
                                            });
                                        })(event)"> An example with arrays</a>
                                </div><div class="toc-row">
                                    <a class="H1-indent" href="#861210cf-10ee-4367-817b-f2fc446dd671" onmouseover="(()=>{document.getElementById('861210cf-10ee-4367-817b-f2fc446dd671').firstElementChild.classList.add('highlight-pluto-cell-shoulder')})()" onmouseout="(()=>{document.getElementById('861210cf-10ee-4367-817b-f2fc446dd671').firstElementChild.classList.remove('highlight-pluto-cell-shoulder')})()" onclick="((e)=>{
                                            e.preventDefault();
                                            document.getElementById('861210cf-10ee-4367-817b-f2fc446dd671').scrollIntoView({
                                                behavior: 'smooth', 
                                                block: 'center'
                                            });
                                        })(event)"> Concurrency</a>
                                </div><div class="toc-row">
                                    <a class="H1-indent" href="#c96d99bd-0d56-41dd-ac7a-57c5bffd9fc0" onmouseover="(()=>{document.getElementById('c96d99bd-0d56-41dd-ac7a-57c5bffd9fc0').firstElementChild.classList.add('highlight-pluto-cell-shoulder')})()" onmouseout="(()=>{document.getElementById('c96d99bd-0d56-41dd-ac7a-57c5bffd9fc0').firstElementChild.classList.remove('highlight-pluto-cell-shoulder')})()" onclick="((e)=>{
                                            e.preventDefault();
                                            document.getElementById('c96d99bd-0d56-41dd-ac7a-57c5bffd9fc0').scrollIntoView({
                                                behavior: 'smooth', 
                                                block: 'center'
                                            });
                                        })(event)"> Multi-threading</a>
                                </div><div class="toc-row">
                                    <a class="H1-indent" href="#51e88fd0-e199-40fa-add1-a982db7bd27c" onmouseover="(()=>{document.getElementById('51e88fd0-e199-40fa-add1-a982db7bd27c').firstElementChild.classList.add('highlight-pluto-cell-shoulder')})()" onmouseout="(()=>{document.getElementById('51e88fd0-e199-40fa-add1-a982db7bd27c').firstElementChild.classList.remove('highlight-pluto-cell-shoulder')})()" onclick="((e)=>{
                                            e.preventDefault();
                                            document.getElementById('51e88fd0-e199-40fa-add1-a982db7bd27c').scrollIntoView({
                                                behavior: 'smooth', 
                                                block: 'center'
                                            });
                                        })(event)"> Multithreaded Parameter Searches</a>
                                </div><div class="toc-row">
                                    <a class="H1-indent" href="#9230f6c0-559a-11eb-20b2-452c1f5ae365" onmouseover="(()=>{document.getElementById('9230f6c0-559a-11eb-20b2-452c1f5ae365').firstElementChild.classList.add('highlight-pluto-cell-shoulder')})()" onmouseout="(()=>{document.getElementById('9230f6c0-559a-11eb-20b2-452c1f5ae365').firstElementChild.classList.remove('highlight-pluto-cell-shoulder')})()" onclick="((e)=>{
                                            e.preventDefault();
                                            document.getElementById('9230f6c0-559a-11eb-20b2-452c1f5ae365').scrollIntoView({
                                                behavior: 'smooth', 
                                                block: 'center'
                                            });
                                        })(event)"> Parallelism</a>
                                </div></div>
        </div>
    </div><script>    const getParentCellId = el => {
        // Traverse up the DOM tree until you reach a pluto-cell
        while (el.nodeName != 'PLUTO-CELL') {
            el = el.parentNode;
            if (!el) return null;
        }
        return el.id;
    }     

    const getElementsByNodename = nodeName => Array.from(
        document.querySelectorAll(
            "pluto-notebook pluto-output " + nodeName
        )
    ).map(el => {
        return {
            "nodeName" : el.nodeName,
            "parentCellId": getParentCellId(el),
            "innerText": el.innerText
        }
    })
    
    const getPlutoCellIds = () => Array.from(
        document.querySelectorAll(
            "pluto-notebook pluto-cell"
        )
    ).map(el => el.id)
    
    const getHeaders = () => {
        const depth = Math.max(1, Math.min(6, 3)) // should be in range 1:6
        const range = Array.from({length: depth}, (x, i) => i+1) // [1, ... depth]
        let headers = [].concat.apply([], range.map(i => getElementsByNodename("h"+i))); // flatten [[h1s...], [h2s...], ...]
        const plutoCellIds = getPlutoCellIds()
        headers.sort((a,b) => plutoCellIds.indexOf(a.parentCellId) - plutoCellIds.indexOf(b.parentCellId)); // sort in the order of appearance
        return headers
    }

    const tocIndentClass = '-indent'
    const render = (el) => `${el.map(h => `<div class="toc-row">
                                    <a class="${h.nodeName}${tocIndentClass}" 
                                        href="#${h.parentCellId}" 
                                        onmouseover="(()=>{document.getElementById('${h.parentCellId}').firstElementChild.classList.add('highlight-pluto-cell-shoulder')})()" 
                                        onmouseout="(()=>{document.getElementById('${h.parentCellId}').firstElementChild.classList.remove('highlight-pluto-cell-shoulder')})()"
                                        onclick="((e)=>{
                                            e.preventDefault();
                                            document.getElementById('${h.parentCellId}').scrollIntoView({
                                                behavior: 'smooth', 
                                                block: 'center'
                                            });
                                        })(event)"
                                        > ${h.innerText}</a>
                                </div>`).join('')}`


    const tocClass = 'toc-aside'

    const tocContentNode = html`<div class="toc-content" id="toc-content"></div>`
    const tocNode = html`<div class=${tocClass} id="toc">
        <div class="markdown">
            <p class="toc-title">Table of Contents</p>
            ${tocContentNode}
        </div>
    </div>`
    const updateCallback = e => {
        tocContentNode.innerHTML = render(getHeaders())                
    }
    updateCallback()

    const observers = {
        current: [],
    }

    const notebook = document.querySelector("pluto-notebook")
    const createCellObservers = () => {
        observers.current.forEach((o) => o.disconnect())
        observers.current = Array.from(notebook.querySelectorAll("pluto-cell")).map(el => {
            const o = new MutationObserver(updateCallback)
            o.observe(el, {attributeFilter: ["class"]})
            return o
        })
    }
    const notebookObserver = new MutationObserver(createCellObservers)
    notebookObserver.observe(notebook, {childList: true})
    
    createCellObservers()

    invalidation.then(() => {
        notebookObserver.disconnect()
        observers.current.forEach((o) => o.disconnect())
    })
    /*const observer = new MutationObserver(updateCallback)

    observer.observe(document.querySelector("pluto-notebook"), {
        subtree: true,
        attributeFilter: ["class"],
    })*/
    /*
    window.addEventListener('cell_output_changed', updateCallback)
    invalidation.then(() => {
        window.removeEventListener('cell_output_changed', updateCallback)
    })*/

    return tocNode
</script><style>@media screen and (min-width: 1081px) {
    .toc-aside {
        position:fixed; 
        right: 1rem;
        top: 5rem; 
        width:25%; 
        padding: 10px;
        border: 3px solid rgba(0, 0, 0, 0.15);
        border-radius: 10px;
        box-shadow: 0 0 11px 0px #00000010;
        max-height: 500px;
        overflow: auto;
    }
}    

.toc-title{
    display: block;
    font-size: 1.5em;
    margin-top: 0.67em;
    margin-bottom: 0.67em;
    margin-left: 0;
    margin-right: 0;
    font-weight: bold;
    border-bottom: 2px solid rgba(0, 0, 0, 0.15);
}

.toc-row {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-bottom: 2px;
}

.highlight-pluto-cell-shoulder {
    background: rgba(0, 0, 0, 0.05);
    background-clip: padding-box;
}

a {
    text-decoration: none;
    font-weight: normal;
    color: gray;
}
a:hover {
    color: black;
}
a.H1-indent {
    padding: 0px 0px;
}
a.H2-indent {
    padding: 0px 10px;
}
a.H3-indent {
    padding: 0px 20px;
}
a.H4-indent {
    padding: 0px 30px;
}
a.H5-indent {
    padding: 0px 40px;
}
a.H6-indent {
    padding: 0px 50px;
}
</style></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">93.0&nbsp;ns</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="29033614-97ca-4b7f-b946-ebdb91edd088"><pluto-shoulder draggable="true" title="Drag to move cell" class=""><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><h1>Let's talk about memory</h1>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">10.1&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="47d7e091-f3f1-482f-9597-9bfd34ec2233"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>There is a disconnect between the theoretical CS world and the real world. For example:</p>
<pre><code>Linked lists are actually not the bee's knees</code></pre>
<p>Why? Because hardware matters. Here is a mental model of the memory layout for a modern, multi-core computer:</p>
<p><img src="https://hackernoon.com/hn-images/1*nT3RAGnOAWmKmvOBnizNtw.png" alt=""></p>
<p>The CPU lives at the bottom and directly accesses your computer's memory (like your RAM) through a series of caches, a smaller bit of fast memory for doing things like quick lookups if the CPU knows it will need to use a bit of data again soon. These lookups and accesses are a physical process that takes time though, so the "closer" the cache is to the CPU, the faste this process should be. So, generally, your L1 cache will have the fastest access and L3 will have the slowest.</p>
<p>Speaking of time, here's a <a href="http://ithare.com/infographics-operation-costs-in-cpu-clock-cycles/">famous chart</a> summarizing how long various operations can take, compared to how far light could travel in that time!</p>
<p>Writing code to take advantage of how memory is accessed can then give us some serious performance improvements.</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">18.7&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="535b82b2-942d-4834-9a94-8d0ee8282b99"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><h1>An example with arrays</h1>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">6.9&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="1dda8db4-a1ff-455e-a0b8-32f1b87e1fe6"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>We like to think of matrices in computer memory as being these 2D objects, but in reality they are just a 1D vector of memory addresses. When we use human notation like (i, j) indexing, what we are really doing is transforming something like this:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">7.6&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="6373654f-6415-4a6a-b2f1-bf5b75dd7fbf"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee>A_vec</assignee><div><pre><code>1:9</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">A_vec</span> <span class="cm-operator">=</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">9</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">83.0&nbsp;ns</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="cc2e47e0-6235-426f-a880-4e11494b71f9"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee>A_mat</assignee><div><pre><code>3×3 reshape(::UnitRange{Int64}, 3, 3) with eltype Int64:
 1  4  7
 2  5  8
 3  6  9</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">A_mat</span> <span class="cm-operator">=</span> <span class="cm-builtin">reshape</span>(<span class="cm-variable">A_vec</span>, <span class="cm-number">3</span>, <span class="cm-number">3</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">152&nbsp;ns</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="2b8792a7-9d56-461c-a4f3-35041ba0c270"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>6</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">A_mat</span>[<span class="cm-number">3</span>, <span class="cm-number">2</span>]</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">439&nbsp;ns</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="438816f0-e8fd-4e3b-8107-fc696510a741"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>To this, under the hood:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">5.7&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="072f4023-203c-405c-8795-6801e0fa5806"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>6</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>5</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">let</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">3</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">j</span> <span class="cm-operator">=</span> <span class="cm-number">2</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">A_vec</span>[<span class="cm-variable">i</span> <span class="cm-operator">+</span> (<span class="cm-variable">j</span><span class="cm-operator">-</span><span class="cm-number">1</span>)<span class="cm-operator">*</span><span class="cm-number">3</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 85px;"></div><div class="CodeMirror-gutters" style="height: 125px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">194&nbsp;ns</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="94b6c3e3-467e-46d5-b33c-f9974281db92"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Using the convention for accessing these entries can then make a noticeable difference in performance. In Julia, arrays are column-major, so let's see what happens if we try looping through it (an example of accessing things in memory) in a row vs. column major fashion:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">4.2&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="51bf3e61-4b8e-4c1b-95a1-7650e5aed151"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y rich_output " mime="text/plain"><assignee></assignee><div></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">A</span> <span class="cm-operator">=</span> <span class="cm-builtin">rand</span>(<span class="cm-number">100</span>, <span class="cm-number">100</span>); <span class="cm-variable">B</span> <span class="cm-operator">=</span> <span class="cm-builtin">rand</span>(<span class="cm-number">100</span>, <span class="cm-number">100</span>); <span class="cm-variable">C</span> <span class="cm-operator">=</span> <span class="cm-builtin">rand</span>(<span class="cm-number">100</span>, <span class="cm-number">100</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">82.2&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="49c03535-4160-42ad-8f2b-27f4b8e3afbd"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>inner_rows! (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>5</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">inner_rows!</span>(<span class="cm-variable">C</span>, <span class="cm-variable">A</span>, <span class="cm-variable">B</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">100</span>, <span class="cm-variable">j</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">100</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">C</span>[<span class="cm-variable">i</span>, <span class="cm-variable">j</span>] <span class="cm-operator">=</span> <span class="cm-variable">A</span>[<span class="cm-variable">i</span>, <span class="cm-variable">j</span>] <span class="cm-operator">+</span> <span class="cm-variable">B</span>[<span class="cm-variable">i</span>, <span class="cm-variable">j</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 85px;"></div><div class="CodeMirror-gutters" style="height: 125px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">51.1&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="7714f2a7-4da4-4779-9ffc-7f19be16543e"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>inner_cols! (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>5</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">inner_cols!</span>(<span class="cm-variable">C</span>, <span class="cm-variable">A</span>, <span class="cm-variable">B</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">j</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">100</span>, <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">100</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">C</span>[<span class="cm-variable">i</span>, <span class="cm-variable">j</span>] <span class="cm-operator">=</span> <span class="cm-variable">A</span>[<span class="cm-variable">i</span>, <span class="cm-variable">j</span>] <span class="cm-operator">+</span> <span class="cm-variable">B</span>[<span class="cm-variable">i</span>, <span class="cm-variable">j</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 85px;"></div><div class="CodeMirror-gutters" style="height: 125px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">66.8&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="62b4b712-8468-4423-a65a-d6d9066fe378"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  43.351 μs (0 allocations: 0 bytes)
  43.759 μs (0 allocations: 0 bytes)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">inner_rows!</span>(<span class="cm-operator">$</span><span class="cm-variable">C</span>, <span class="cm-operator">$</span><span class="cm-variable">A</span>, <span class="cm-operator">$</span><span class="cm-variable">B</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">inner_cols!</span>(<span class="cm-operator">$</span><span class="cm-variable">C</span>, <span class="cm-operator">$</span><span class="cm-variable">A</span>, <span class="cm-operator">$</span><span class="cm-variable">B</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">19.7&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="c2ad7563-35d4-4a6d-838d-61be4443d567"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>We see a speed-up when we respect the memory layout of our data because the CPU does not need to skip around as much or break the heuristics it uses to guess which bits of data we might need ahead of time.</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.7&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="861210cf-10ee-4367-817b-f2fc446dd671"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><h1>Concurrency</h1>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">2.9&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="ca40e65a-ab7e-4fb9-a708-88ec8602eb42"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre> 10.034351 seconds (83 allocations: 3.328 KiB)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>5</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@time</span> <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">sleep</span>(<span class="cm-number">2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 85px;"></div><div class="CodeMirror-gutters" style="height: 125px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">10.7&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="436cd061-93ea-45ec-a606-a09b2dd476f0"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  2.017967 seconds (600 allocations: 42.578 KiB, 0.69% compilation time)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>5</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@time</span> <span class="cm-meta">@sync</span> <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">5</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@async</span> <span class="cm-builtin">sleep</span>(<span class="cm-number">2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 85px;"></div><div class="CodeMirror-gutters" style="height: 125px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">2.3&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="c96d99bd-0d56-41dd-ac7a-57c5bffd9fc0"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><h1>Multi-threading</h1>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.0&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="a67cc8ad-d8ef-4830-8068-8aed7062377a"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Let's start with a straightforward serial apprach to solving the Lorez equations first:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.3&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="f1c0022f-c12f-4c61-b6a0-61c2debe840d"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>lorenz! (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>9</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Put it on the heap</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">lorenz!</span>(<span class="cm-variable">du</span>, <span class="cm-variable">u</span>, <span class="cm-variable">p</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">α</span>, <span class="cm-variable">σ</span>, <span class="cm-variable">ρ</span>, <span class="cm-variable">β</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@inbounds</span> <span class="cm-keyword">begin</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du</span>[<span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">σ</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">1</span>]))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du</span>[<span class="cm-number">2</span>] <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span>(<span class="cm-variable">ρ</span> <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">3</span>] <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">2</span>]))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du</span>[<span class="cm-number">3</span>] <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">3</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">-</span> <span class="cm-variable">β</span><span class="cm-operator">*</span><span class="cm-variable">u</span>[<span class="cm-number">3</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 146px;"></div><div class="CodeMirror-gutters" style="height: 186px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">153&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="c07e6957-a153-4bfa-a2a9-3ce6c4857922"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>solve_system_save_iip! (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>7</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">solve_system_save_iip!</span>(<span class="cm-variable">u</span>, <span class="cm-variable">f</span>, <span class="cm-variable">u0</span>, <span class="cm-variable">p</span>, <span class="cm-variable">n</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@inbounds</span> <span class="cm-variable">u</span>[<span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-variable">u0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@inbounds</span> <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-builtin">length</span>(<span class="cm-variable">u</span>)<span class="cm-operator">-</span><span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">f</span>(<span class="cm-variable">u</span>[<span class="cm-variable">i</span><span class="cm-operator">+</span><span class="cm-number">1</span>], <span class="cm-variable">u</span>[<span class="cm-variable">i</span>], <span class="cm-variable">p</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">u</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="height: 155px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">329&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="709e5550-c0dd-46bc-ac0d-77c83b648d22"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee>u_vec</assignee><div><jltree class="collapsed">Vector{Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>4.24399e-314</pre></v></r><r><k>2</k><v><pre>6.36599e-314</pre></v></r><r><k>3</k><v><pre>6.36599e-314</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>5.0e-324</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>5.0e-324</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">Float64<jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.9296e-310</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">u_vec</span> <span class="cm-operator">=</span> [<span class="cm-builtin">Vector</span>{<span class="cm-variable">Float64</span>}(<span class="cm-variable">undef</span>, <span class="cm-number">3</span>) <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">1_000</span>]</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">772&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="bde73ff2-9fc3-4708-baed-03a9e56c8337"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee>p</assignee><div><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>10.0</pre></v></r><r><k>3</k><v><pre>28.0</pre></v></r><r><k>4</k><v><pre>2.66667</pre></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">p</span> <span class="cm-operator">=</span> (<span class="cm-number">0.02</span>, <span class="cm-number">10.0</span>, <span class="cm-number">28.0</span>, <span class="cm-number">8</span><span class="cm-operator">/</span><span class="cm-number">3</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">56.0&nbsp;ns</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="0c25ec5b-cb24-4c1e-80bd-3ba748119204"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  6.798 μs (1 allocation: 112 bytes)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>3</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">solve_system_save_iip!</span>(<span class="cm-variable">u_vec</span>, <span class="cm-variable">lorenz!</span>, [<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>], <span class="cm-variable">p</span>, <span class="cm-number">1_000</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="height: 94px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">5.8&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="043baaf9-ffb5-4c26-be6c-40feaea960ea"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Then SA</p>
</div></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>3</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">md"""</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">Then SA</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-string">"""</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="height: 94px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.2&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="3509efff-7beb-4c51-9217-4e9a1f2618e0"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y rich_output " mime="text/plain"><assignee></assignee><div></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">using</span> <span class="cm-variable">StaticArrays</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">751&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="57d5c854-9f9c-4080-adda-c5484f9e449e"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>lorenz (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>9</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">lorenz</span>(<span class="cm-variable">u</span>, <span class="cm-variable">p</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">α</span>, <span class="cm-variable">σ</span>, <span class="cm-variable">ρ</span>, <span class="cm-variable">β</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@inbounds</span> <span class="cm-keyword">begin</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du1</span> <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">σ</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">1</span>]))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du2</span> <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span>(<span class="cm-variable">ρ</span> <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">3</span>] <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">2</span>]))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du3</span> <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">3</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">-</span> <span class="cm-variable">β</span><span class="cm-operator">*</span><span class="cm-variable">u</span>[<span class="cm-number">3</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-meta">@SVector</span> [<span class="cm-variable">du1</span>, <span class="cm-variable">du2</span>, <span class="cm-variable">du3</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 146px;"></div><div class="CodeMirror-gutters" style="height: 186px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">91.1&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="23784b92-7280-4d56-a1f9-24a546383b72"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>solve_system_save! (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>7</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">solve_system_save!</span>(<span class="cm-variable">u</span>, <span class="cm-variable">f</span>, <span class="cm-variable">u0</span>, <span class="cm-variable">p</span>, <span class="cm-variable">n</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@inbounds</span> <span class="cm-variable">u</span>[<span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-variable">u0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@inbounds</span> <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-builtin">length</span>(<span class="cm-variable">u</span>)<span class="cm-operator">-</span><span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">u</span>[<span class="cm-variable">i</span><span class="cm-operator">+</span><span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-builtin">f</span>(<span class="cm-variable">u</span>[<span class="cm-variable">i</span>], <span class="cm-variable">p</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">u</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="height: 155px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">33.0&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="060d936d-c759-4064-9302-a454fa107bb7"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee>u</assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.41449e-316</pre></v></r><r><k>2</k><v><pre>3.14713e-316</pre></v></r><r><k>3</k><v><pre>3.41449e-316</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.14713e-316</pre></v></r><r><k>2</k><v><pre>3.13956e-316</pre></v></r><r><k>3</k><v><pre>8.48798e-314</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.13957e-316</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.122e-314</pre></v></r><r><k>2</k><v><pre>2.3996e-316</pre></v></r><r><k>3</k><v><pre>3.11304e-316</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.41087e-316</pre></v></r><r><k>2</k><v><pre>3.11304e-316</pre></v></r><r><k>3</k><v><pre>3.13956e-316</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>8.48798e-314</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>2.122e-314</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.13957e-316</pre></v></r><r><k>2</k><v><pre>8.48798e-314</pre></v></r><r><k>3</k><v><pre>2.57532e-312</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.92938e-310</pre></v></r><r><k>2</k><v><pre>1.60957e-312</pre></v></r><r><k>3</k><v><pre>3.0e-322</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>5.0e-324</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.25939e-311</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>1.78063e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.13957e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.13957e-316</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>8.48798e-314</pre></v></r><r><k>2</k><v><pre>3.13969e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.13958e-316</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>1.14459e-311</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.122e-314</pre></v></r><r><k>2</k><v><pre>3.13958e-316</pre></v></r><r><k>3</k><v><pre>8.48798e-314</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.13958e-316</pre></v></r><r><k>2</k><v><pre>8.48798e-314</pre></v></r><r><k>3</k><v><pre>3.13956e-316</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.122e-314</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>2.122e-314</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>4.2392e-314</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>5.0e-324</pre></v></r><r><k>3</k><v><pre>5.0e-324</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.24054e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.24062e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.24062e-316</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.24048e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.24048e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.24058e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.24058e-316</pre></v></r><r><k>3</k><v><pre>9.54e-322</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.26011e-316</pre></v></r><r><k>2</k><v><pre>6.92961e-310</pre></v></r><r><k>3</k><v><pre>3.24048e-316</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">u</span> <span class="cm-operator">=</span> <span class="cm-builtin">Vector</span>{<span class="cm-builtin">typeof</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]))}(<span class="cm-variable">undef</span>, <span class="cm-number">1_000</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">244&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="1f27d62d-674a-4dfd-8912-2689515f17bc"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  5.162 μs (0 allocations: 0 bytes)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>3</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">solve_system_save!</span>(<span class="cm-variable">u</span>, <span class="cm-variable">lorenz</span>, <span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>, <span class="cm-number">1_000</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="height: 94px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">4.8&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="cea8ce9f-f657-44b9-b2ed-de3f3983ad08"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Now let's try multithreaded. Shared memory, embarassingly parallel. Using heap approach from first example instead of SA example so that the data in each of our threads can talk to each other</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.1&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="f8357564-8cf5-4329-86da-ea182471e0c9"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y rich_output " mime="text/plain"><assignee></assignee><div></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">using</span> <span class="cm-variable">Base</span><span class="cm-operator">.</span><span class="cm-variable">Threads</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">12.9&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="c2326f0b-356f-4353-b1e4-98960b4f4903"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>lorenz_mt! (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>16</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">lorenz_mt!</span>(<span class="cm-variable">du</span>, <span class="cm-variable">u</span>, <span class="cm-variable">p</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">α</span>, <span class="cm-variable">σ</span>, <span class="cm-variable">ρ</span>, <span class="cm-variable">β</span> <span class="cm-operator">=</span> <span class="cm-variable">p</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">let</span> <span class="cm-variable">du</span><span class="cm-operator">=</span><span class="cm-variable">du</span>, <span class="cm-variable">u</span><span class="cm-operator">=</span><span class="cm-variable">u</span>, <span class="cm-variable">p</span><span class="cm-operator">=</span><span class="cm-variable">p</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Threads</span><span class="cm-operator">.</span><span class="cm-meta">@threads</span> <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">3</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@inbounds</span> <span class="cm-keyword">begin</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-variable">i</span> <span class="cm-operator">==</span> <span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du</span>[<span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">σ</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">1</span>]))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elseif</span> <span class="cm-variable">i</span> <span class="cm-operator">==</span> <span class="cm-number">2</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du</span>[<span class="cm-number">2</span>] <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span>(<span class="cm-variable">ρ</span> <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">3</span>] <span class="cm-operator">-</span> <span class="cm-variable">u</span>[<span class="cm-number">2</span>]))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">du</span>[<span class="cm-number">3</span>] <span class="cm-operator">=</span> <span class="cm-variable">u</span>[<span class="cm-number">3</span>] <span class="cm-operator">+</span> <span class="cm-variable">α</span><span class="cm-operator">*</span>(<span class="cm-variable">u</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable">u</span>[<span class="cm-number">2</span>] <span class="cm-operator">-</span> <span class="cm-variable">β</span><span class="cm-operator">*</span><span class="cm-variable">u</span>[<span class="cm-number">3</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="height: 293px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">166&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="d386b7f7-a4e8-41b6-a8be-b26cc657db85"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  3.594 ms (20980 allocations: 1.86 MiB)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>3</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">solve_system_save_iip!</span>(<span class="cm-variable">u_vec</span>, <span class="cm-variable">lorenz_mt!</span>, [<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>], <span class="cm-variable">p</span>, <span class="cm-number">1_000</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="height: 94px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">11.3&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="757aa797-177e-4e45-8a27-2e857ba17e38"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Oof, that's bad. By like three orders of magnitude. A major reason why goes back to the <a href="http://ithare.com/infographics-operation-costs-in-cpu-clock-cycles/">famous chart</a>. Creating threads is a relatively heavy CPU operation (Allocation+deallocation pair) compared to the handful of floating point operations ("Simple register-register op") we are doing per thread. In other words, mult-threading is completely overkill for this specific problem and is not worth the additional overhead incurred by just setting up the threads in the first place.</p>
<p>The moral of the story is that multi-threading is not a silver bullet. You need to know the nature of the problem to know which tools will work best to solve it. As a rule of thumb, if an op takes a couple hundred nanosecond or less, it's probably overkill to try and multithread it.</p>
<p>With that in mind, let's turn to a similar problem that is much more amenable to parallelization: Parameter Searches.</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">7.0&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="51e88fd0-e199-40fa-add1-a982db7bd27c"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><h1>Multithreaded Parameter Searches</h1>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">2.8&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="0b809325-6ac4-4326-8e07-0b0324fd3a6d"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y rich_output " mime="text/plain"><assignee></assignee><div></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">using</span> <span class="cm-variable">Statistics</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">194&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="cdb8aac6-232d-470c-98aa-839d93fc20fc"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee></assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.92961e-310</pre></v></r><r><k>2</k><v><pre>6.92961e-310</pre></v></r><r><k>3</k><v><pre>2.45388e-316</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.45388e-316</pre></v></r><r><k>2</k><v><pre>6.9296e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.92951e-310</pre></v></r><r><k>2</k><v><pre>6.92951e-310</pre></v></r><r><k>3</k><v><pre>6.92951e-310</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9296e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.9295e-310</pre></v></r><r><k>2</k><v><pre>6.9295e-310</pre></v></r><r><k>3</k><v><pre>6.9295e-310</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">_u_cache</span> <span class="cm-operator">=</span> <span class="cm-builtin">Vector</span>{<span class="cm-builtin">typeof</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]))}(<span class="cm-variable">undef</span>, <span class="cm-number">1_000</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">19.8&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="8596f5af-3696-4d22-a847-49b76ca6a373"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>_compute_trajectory_mean (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">_compute_trajectory_mean</span>(<span class="cm-variable">u</span>, <span class="cm-variable">u0</span>, <span class="cm-variable">p</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">solve_system_save!</span>(<span class="cm-variable">u</span>, <span class="cm-variable">lorenz</span>, <span class="cm-variable">u0</span>, <span class="cm-variable">p</span>, <span class="cm-number">1_000</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-builtin">mean</span>(<span class="cm-variable">u</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">24.2&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="82543bf0-1b36-4511-8651-87d4492169cc"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>compute_trajectory_mean (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>2</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"># Using a closure to keep the API uniform</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">compute_trajectory_mean</span>(<span class="cm-variable">u0</span>, <span class="cm-variable">p</span>) <span class="cm-operator">=</span> <span class="cm-builtin">_compute_trajectory_mean</span>(<span class="cm-variable">_u_cache</span>, <span class="cm-variable">u0</span>, <span class="cm-variable">p</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 39px;"></div><div class="CodeMirror-gutters" style="height: 79px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">25.8&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="b2f35677-cf25-42e3-8fa6-124d0186d0a7"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  8.673 μs (1 allocation: 32 bytes)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>3</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">compute_trajectory_mean</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 54px;"></div><div class="CodeMirror-gutters" style="height: 94px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">5.8&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="b77c5a71-e2d8-4a2d-bcd0-8c9000e21033"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Looks good, now let's search different inputs for <code>p</code>:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.4&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="7a3385b5-eb08-4625-8268-348a002132b7"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee>ps</assignee><div><jltree class="collapsed">NTuple{4, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>6.36296</pre></v></r><r><k>3</k><v><pre>7.63204</pre></v></r><r><k>4</k><v><pre>0.652214</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>0.253572</pre></v></r><r><k>3</k><v><pre>6.13214</pre></v></r><r><k>4</k><v><pre>0.775629</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>0.710709</pre></v></r><r><k>3</k><v><pre>24.945</pre></v></r><r><k>4</k><v><pre>1.43608</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>0.303568</pre></v></r><r><k>3</k><v><pre>14.1285</pre></v></r><r><k>4</k><v><pre>1.13258</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>2.71374</pre></v></r><r><k>3</k><v><pre>4.83976</pre></v></r><r><k>4</k><v><pre>0.137524</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>2.00791</pre></v></r><r><k>3</k><v><pre>9.98584</pre></v></r><r><k>4</k><v><pre>1.94942</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>9.00726</pre></v></r><r><k>3</k><v><pre>6.51048</pre></v></r><r><k>4</k><v><pre>0.998091</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>7.10891</pre></v></r><r><k>3</k><v><pre>20.1507</pre></v></r><r><k>4</k><v><pre>1.23198</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>4.6755</pre></v></r><r><k>3</k><v><pre>3.9528</pre></v></r><r><k>4</k><v><pre>0.470775</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>1.15839</pre></v></r><r><k>3</k><v><pre>25.8757</pre></v></r><r><k>4</k><v><pre>0.905518</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>7.38922</pre></v></r><r><k>3</k><v><pre>19.854</pre></v></r><r><k>4</k><v><pre>0.23734</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>0.258379</pre></v></r><r><k>3</k><v><pre>12.1144</pre></v></r><r><k>4</k><v><pre>0.86665</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>8.06613</pre></v></r><r><k>3</k><v><pre>26.1097</pre></v></r><r><k>4</k><v><pre>1.15001</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>8.83247</pre></v></r><r><k>3</k><v><pre>10.0235</pre></v></r><r><k>4</k><v><pre>1.84505</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>6.48993</pre></v></r><r><k>3</k><v><pre>26.4332</pre></v></r><r><k>4</k><v><pre>0.512599</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>3.54558</pre></v></r><r><k>3</k><v><pre>26.563</pre></v></r><r><k>4</k><v><pre>2.21944</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>7.5063</pre></v></r><r><k>3</k><v><pre>22.4822</pre></v></r><r><k>4</k><v><pre>1.85545</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>3.1701</pre></v></r><r><k>3</k><v><pre>27.2809</pre></v></r><r><k>4</k><v><pre>1.19823</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>7.60187</pre></v></r><r><k>3</k><v><pre>16.397</pre></v></r><r><k>4</k><v><pre>2.47914</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>0.53833</pre></v></r><r><k>3</k><v><pre>7.91416</pre></v></r><r><k>4</k><v><pre>0.653451</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>7.87795</pre></v></r><r><k>3</k><v><pre>15.2625</pre></v></r><r><k>4</k><v><pre>1.27587</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>4.29722</pre></v></r><r><k>3</k><v><pre>3.53392</pre></v></r><r><k>4</k><v><pre>0.321525</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>1.0625</pre></v></r><r><k>3</k><v><pre>27.1521</pre></v></r><r><k>4</k><v><pre>0.736804</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>3.32252</pre></v></r><r><k>3</k><v><pre>10.127</pre></v></r><r><k>4</k><v><pre>2.62625</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>8.80014</pre></v></r><r><k>3</k><v><pre>6.28015</pre></v></r><r><k>4</k><v><pre>0.279895</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>5.8923</pre></v></r><r><k>3</k><v><pre>8.34791</pre></v></r><r><k>4</k><v><pre>1.48387</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>0.540678</pre></v></r><r><k>3</k><v><pre>18.0522</pre></v></r><r><k>4</k><v><pre>1.61612</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>8.67516</pre></v></r><r><k>3</k><v><pre>3.1001</pre></v></r><r><k>4</k><v><pre>0.159445</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>5.16565</pre></v></r><r><k>3</k><v><pre>26.3751</pre></v></r><r><k>4</k><v><pre>0.816313</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed"><jlarray class="Tuple"><r><k>1</k><v><pre>0.02</pre></v></r><r><k>2</k><v><pre>3.80171</pre></v></r><r><k>3</k><v><pre>5.44295</pre></v></r><r><k>4</k><v><pre>0.89253</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ps</span> <span class="cm-operator">=</span> [(<span class="cm-number">0.02</span>, <span class="cm-number">10.0</span>, <span class="cm-number">28.0</span>, <span class="cm-number">8</span><span class="cm-operator">/</span><span class="cm-number">3</span>) <span class="cm-operator">.*</span> (<span class="cm-number">1.0</span>, <span class="cm-builtin">rand</span>(<span class="cm-number">3</span>)<span class="cm-operator">...</span>) <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">1_000</span>]</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">149&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="c948a3b4-0af1-44cb-8300-331baf343581"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee>serial_out</assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.93763</pre></v></r><r><k>2</k><v><pre>1.94493</pre></v></r><r><k>3</k><v><pre>5.52877</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.76602</pre></v></r><r><k>2</k><v><pre>1.92914</pre></v></r><r><k>3</k><v><pre>4.08098</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.19158</pre></v></r><r><k>2</k><v><pre>5.4948</pre></v></r><r><k>3</k><v><pre>19.0344</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.29989</pre></v></r><r><k>2</k><v><pre>3.70734</pre></v></r><r><k>3</k><v><pre>10.1491</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.779284</pre></v></r><r><k>2</k><v><pre>0.774766</pre></v></r><r><k>3</k><v><pre>3.92257</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.4871</pre></v></r><r><k>2</k><v><pre>3.55044</pre></v></r><r><k>3</k><v><pre>6.23265</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.09219</pre></v></r><r><k>2</k><v><pre>2.09828</pre></v></r><r><k>3</k><v><pre>4.26471</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.38314</pre></v></r><r><k>2</k><v><pre>4.40708</pre></v></r><r><k>3</k><v><pre>15.4209</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.16537</pre></v></r><r><k>2</k><v><pre>1.16696</pre></v></r><r><k>3</k><v><pre>2.68215</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.39995</pre></v></r><r><k>2</k><v><pre>4.54709</pre></v></r><r><k>3</k><v><pre>20.9289</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.14566</pre></v></r><r><k>2</k><v><pre>1.1528</pre></v></r><r><k>3</k><v><pre>19.6559</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.70283</pre></v></r><r><k>2</k><v><pre>3.05806</pre></v></r><r><k>3</k><v><pre>8.82808</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.88958</pre></v></r><r><k>2</k><v><pre>4.91397</pre></v></r><r><k>3</k><v><pre>20.7429</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.44608</pre></v></r><r><k>2</k><v><pre>3.4601</pre></v></r><r><k>3</k><v><pre>6.37377</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.59472</pre></v></r><r><k>2</k><v><pre>6.67437</pre></v></r><r><k>3</k><v><pre>19.5191</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.56262</pre></v></r><r><k>2</k><v><pre>5.59325</pre></v></r><r><k>3</k><v><pre>16.5636</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.14146</pre></v></r><r><k>2</k><v><pre>5.20691</pre></v></r><r><k>3</k><v><pre>21.6812</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.20955</pre></v></r><r><k>2</k><v><pre>5.23754</pre></v></r><r><k>3</k><v><pre>10.9042</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.96266</pre></v></r><r><k>2</k><v><pre>2.05282</pre></v></r><r><k>3</k><v><pre>5.70578</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.80483</pre></v></r><r><k>2</k><v><pre>3.82274</pre></v></r><r><k>3</k><v><pre>11.1892</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.943875</pre></v></r><r><k>2</k><v><pre>0.942913</pre></v></r><r><k>3</k><v><pre>2.49891</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.13112</pre></v></r><r><k>2</k><v><pre>4.27792</pre></v></r><r><k>3</k><v><pre>22.4577</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.94455</pre></v></r><r><k>2</k><v><pre>3.98982</pre></v></r><r><k>3</k><v><pre>5.93371</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.22196</pre></v></r><r><k>2</k><v><pre>1.22306</pre></v></r><r><k>3</k><v><pre>4.92782</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.83238</pre></v></r><r><k>2</k><v><pre>2.84812</pre></v></r><r><k>3</k><v><pre>5.3273</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.49015</pre></v></r><r><k>2</k><v><pre>4.828</pre></v></r><r><k>3</k><v><pre>12.888</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.665518</pre></v></r><r><k>2</k><v><pre>0.663367</pre></v></r><r><k>3</k><v><pre>2.35351</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.21822</pre></v></r><r><k>2</k><v><pre>4.24967</pre></v></r><r><k>3</k><v><pre>21.6167</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.79876</pre></v></r><r><k>2</k><v><pre>1.80932</pre></v></r><r><k>3</k><v><pre>3.50224</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">serial_out</span> <span class="cm-operator">=</span> <span class="cm-builtin">map</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">p</span> <span class="cm-operator">-&gt;</span> <span class="cm-builtin">compute_trajectory_mean</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ps</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">77.4&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="daa14169-be2b-4802-9e95-7b309935f4e5"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Now multithreading:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">15.6&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="1425adbd-6aab-4a41-85c3-95c85acf1bd0"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>tmap (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>7</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">tmap</span>(<span class="cm-variable">f</span>, <span class="cm-variable">ps</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">out</span> <span class="cm-operator">=</span> <span class="cm-builtin">Vector</span>{<span class="cm-builtin">typeof</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]))}(<span class="cm-variable">undef</span>, <span class="cm-number">1_000</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Threads</span><span class="cm-operator">.</span><span class="cm-meta">@threads</span> <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">1_000</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">out</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-builtin">f</span>(<span class="cm-variable">ps</span>[<span class="cm-variable">i</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">out</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="height: 155px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">125&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="50a5f536-eeee-4053-8405-603c739bbf35"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee>threaded_out</assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.93763</pre></v></r><r><k>2</k><v><pre>1.94493</pre></v></r><r><k>3</k><v><pre>5.52877</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.76602</pre></v></r><r><k>2</k><v><pre>1.92914</pre></v></r><r><k>3</k><v><pre>4.08098</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.19158</pre></v></r><r><k>2</k><v><pre>5.4948</pre></v></r><r><k>3</k><v><pre>19.0344</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.29989</pre></v></r><r><k>2</k><v><pre>3.70734</pre></v></r><r><k>3</k><v><pre>10.1491</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.779284</pre></v></r><r><k>2</k><v><pre>0.774766</pre></v></r><r><k>3</k><v><pre>3.92257</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.99799</pre></v></r><r><k>2</k><v><pre>4.07555</pre></v></r><r><k>3</k><v><pre>13.2689</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.79145</pre></v></r><r><k>2</k><v><pre>2.80188</pre></v></r><r><k>3</k><v><pre>10.3548</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.14663</pre></v></r><r><k>2</k><v><pre>4.1733</pre></v></r><r><k>3</k><v><pre>17.9345</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.57475</pre></v></r><r><k>2</k><v><pre>4.60407</pre></v></r><r><k>3</k><v><pre>16.5841</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.94769</pre></v></r><r><k>2</k><v><pre>3.98134</pre></v></r><r><k>3</k><v><pre>17.4078</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.71597</pre></v></r><r><k>2</k><v><pre>1.72198</pre></v></r><r><k>3</k><v><pre>18.2407</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.723</pre></v></r><r><k>2</k><v><pre>4.74675</pre></v></r><r><k>3</k><v><pre>19.6705</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.33057</pre></v></r><r><k>2</k><v><pre>4.40711</pre></v></r><r><k>3</k><v><pre>8.49979</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.33476</pre></v></r><r><k>2</k><v><pre>1.34246</pre></v></r><r><k>3</k><v><pre>1.44619</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.11587</pre></v></r><r><k>2</k><v><pre>6.17556</pre></v></r><r><k>3</k><v><pre>17.8842</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.42778</pre></v></r><r><k>2</k><v><pre>1.42754</pre></v></r><r><k>3</k><v><pre>4.96187</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.0791</pre></v></r><r><k>2</k><v><pre>1.07917</pre></v></r><r><k>3</k><v><pre>3.57501</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.943875</pre></v></r><r><k>2</k><v><pre>0.942913</pre></v></r><r><k>3</k><v><pre>2.49891</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.94455</pre></v></r><r><k>2</k><v><pre>3.98982</pre></v></r><r><k>3</k><v><pre>5.93371</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.11174</pre></v></r><r><k>2</k><v><pre>5.14358</pre></v></r><r><k>3</k><v><pre>22.0807</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.80746</pre></v></r><r><k>2</k><v><pre>4.84734</pre></v></r><r><k>3</k><v><pre>21.8399</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.08731</pre></v></r><r><k>2</k><v><pre>3.25681</pre></v></r><r><k>3</k><v><pre>24.193</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.665518</pre></v></r><r><k>2</k><v><pre>0.663367</pre></v></r><r><k>3</k><v><pre>2.35351</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.09572</pre></v></r><r><k>2</k><v><pre>6.20455</pre></v></r><r><k>3</k><v><pre>15.9309</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.52022</pre></v></r><r><k>2</k><v><pre>0.51781</pre></v></r><r><k>3</k><v><pre>0.129473</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">threaded_out</span> <span class="cm-operator">=</span> <span class="cm-builtin">tmap</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">p</span> <span class="cm-operator">-&gt;</span> <span class="cm-builtin">compute_trajectory_mean</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ps</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">81.4&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="c88c7ea8-b6c7-4a6c-af16-8d01ab8ebcf6"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Let's compare to the serial output:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">4.4&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="03db62b2-ff33-4e3c-9c6c-0943fbd9cc19"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee></assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-0.510888</pre></v></r><r><k>2</k><v><pre>-0.525111</pre></v></r><r><k>3</k><v><pre>-7.03628</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-0.699264</pre></v></r><r><k>2</k><v><pre>-0.7036</pre></v></r><r><k>3</k><v><pre>-6.09008</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.236509</pre></v></r><r><k>2</k><v><pre>0.23378</pre></v></r><r><k>3</k><v><pre>-2.51361</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-3.40938</pre></v></r><r><k>2</k><v><pre>-3.43711</pre></v></r><r><k>3</k><v><pre>-13.9019</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.452257</pre></v></r><r><k>2</k><v><pre>0.565744</pre></v></r><r><k>3</k><v><pre>3.52104</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-0.570302</pre></v></r><r><k>2</k><v><pre>-0.569178</pre></v></r><r><k>3</k><v><pre>1.41516</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.166576</pre></v></r><r><k>2</k><v><pre>0.167221</pre></v></r><r><k>3</k><v><pre>1.07242</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-0.884485</pre></v></r><r><k>2</k><v><pre>-0.94701</pre></v></r><r><k>3</k><v><pre>-2.12602</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.478855</pre></v></r><r><k>2</k><v><pre>0.498819</pre></v></r><r><k>3</k><v><pre>1.63491</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.71367</pre></v></r><r><k>2</k><v><pre>3.77936</pre></v></r><r><k>3</k><v><pre>16.7193</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.883561</pre></v></r><r><k>2</k><v><pre>0.973653</pre></v></r><r><k>3</k><v><pre>2.13076</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-3.88978</pre></v></r><r><k>2</k><v><pre>-3.92052</pre></v></r><r><k>3</k><v><pre>-17.1529</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-1.97509</pre></v></r><r><k>2</k><v><pre>-1.99922</pre></v></r><r><k>3</k><v><pre>-16.5126</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.40283</pre></v></r><r><k>2</k><v><pre>1.57119</pre></v></r><r><k>3</k><v><pre>-11.305</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-1.87751</pre></v></r><r><k>2</k><v><pre>-1.95488</pre></v></r><r><k>3</k><v><pre>5.68588</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.27854</pre></v></r><r><k>2</k><v><pre>1.29151</pre></v></r><r><k>3</k><v><pre>3.37276</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">serial_out</span> <span class="cm-operator">-</span> <span class="cm-variable">threaded_out</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">9.8&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="e81bdefd-77e3-4b23-9ade-c9f8ee25535c"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Oh no, they're not the same! The problem is our cache vector, <code>_u_cache</code>. In serial, this is fine, but in parallel the threads just keep overwritting each other because they are all sharing that single cache. The process is not <strong>thread safe</strong>. We can fix this by giving each thread its own cache:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">6.3&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="746db25d-f176-42d8-bec7-b9c9e159d5c6"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee></assignee><div><jltree class="collapsed">Vector{StaticArrays.SVector{3, Float64}}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.42124e-316</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.42123e-316</pre></v></r><r><k>2</k><v><pre>2.15e-320</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.2089e-316</pre></v></r><r><k>2</k><v><pre>3.2089e-316</pre></v></r><r><k>3</k><v><pre>1.0e-323</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.42124e-316</pre></v></r><r><k>3</k><v><pre>1.947e-308</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.42124e-316</pre></v></r><r><k>3</k><v><pre>2.15e-320</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.2089e-316</pre></v></r><r><k>3</k><v><pre>3.2089e-316</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.0e-323</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.20912e-316</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>9.76118e-313</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.42124e-316</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.15e-320</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.2089e-316</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.20891e-316</pre></v></r><r><k>2</k><v><pre>1.0e-323</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.20912e-316</pre></v></r><r><k>2</k><v><pre>1.0e-323</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.20912e-316</pre></v></r><r><k>2</k><v><pre>2.15e-320</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.20891e-316</pre></v></r><r><k>2</k><v><pre>3.20891e-316</pre></v></r><r><k>3</k><v><pre>1.0e-323</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.20919e-316</pre></v></r><r><k>3</k><v><pre>1.0e-323</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.20912e-316</pre></v></r><r><k>3</k><v><pre>2.15e-320</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.20891e-316</pre></v></r><r><k>3</k><v><pre>3.20891e-316</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.0e-323</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.20919e-316</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.94695e-308</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.20919e-316</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.15e-320</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.20892e-316</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.20892e-316</pre></v></r><r><k>2</k><v><pre>3.49446e-316</pre></v></r><r><k>3</k><v><pre>1.52974e-308</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.43e-321</pre></v></r><r><k>2</k><v><pre>4.24399e-314</pre></v></r><r><k>3</k><v><pre>6.6e-322</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.53e-321</pre></v></r><r><k>2</k><v><pre>4.24399e-314</pre></v></r><r><k>3</k><v><pre>6.6e-322</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.646e-321</pre></v></r><r><k>2</k><v><pre>1.061e-313</pre></v></r><r><k>3</k><v><pre>1.66e-321</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.705e-321</pre></v></r><r><k>2</k><v><pre>1.061e-313</pre></v></r><r><k>3</k><v><pre>1.976e-321</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.765e-321</pre></v></r><r><k>2</k><v><pre>1.061e-313</pre></v></r><r><k>3</k><v><pre>2.29e-321</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.82e-321</pre></v></r><r><k>2</k><v><pre>1.061e-313</pre></v></r><r><k>3</k><v><pre>2.61e-321</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.88e-321</pre></v></r><r><k>2</k><v><pre>1.061e-313</pre></v></r><r><k>3</k><v><pre>2.925e-321</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.94e-321</pre></v></r><r><k>2</k><v><pre>1.061e-313</pre></v></r><r><k>3</k><v><pre>3.16e-321</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.997e-321</pre></v></r><r><k>2</k><v><pre>4.24399e-314</pre></v></r><r><k>3</k><v><pre>1.057e-321</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.106e-321</pre></v></r><r><k>2</k><v><pre>4.24399e-314</pre></v></r><r><k>3</k><v><pre>1.117e-321</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.45221e-316</pre></v></r><r><k>2</k><v><pre>7.0e-323</pre></v></r><r><k>3</k><v><pre>5.48938e247</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.0552e-310</pre></v></r><r><k>2</k><v><pre>3.18299e-314</pre></v></r><r><k>3</k><v><pre>2.122e-314</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.74e-322</pre></v></r><r><k>2</k><v><pre>1.50596e-319</pre></v></r><r><k>3</k><v><pre>3.10822e-316</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.13398e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>2.45221e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.6e-322</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>2.45222e-316</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>8.48798e-314</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>1.4941e-319</pre></v></r><r><k>3</k><v><pre>2.37595e-316</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.92961e-310</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.45223e-316</pre></v></r><r><k>2</k><v><pre>1.39103e-309</pre></v></r><r><k>3</k><v><pre>3.20917e-316</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>3.20917e-316</pre></v></r><r><k>3</k><v><pre>3.20917e-316</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.45223e-316</pre></v></r><r><k>2</k><v><pre>8.34441e-309</pre></v></r><r><k>3</k><v><pre>2.45222e-316</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>-2.4403e-313</pre></v></r><r><k>2</k><v><pre>2.45223e-316</pre></v></r><r><k>3</k><v><pre>1.52993e-308</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.4e-323</pre></v></r><r><k>2</k><v><pre>-6.04769e-313</pre></v></r><r><k>3</k><v><pre>2.45222e-316</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.95524e-309</pre></v></r><r><k>2</k><v><pre>3.85e-321</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.74012e-316</pre></v></r><r><k>2</k><v><pre>6.92961e-310</pre></v></r><r><k>3</k><v><pre>2.45281e-316</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>2.45337e-316</pre></v></r><r><k>3</k><v><pre>2.45338e-316</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.45338e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.75859e-313</pre></v></r><r><k>2</k><v><pre>2.45339e-316</pre></v></r><r><k>3</k><v><pre>2.45339e-316</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.45339e-316</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>2.45339e-316</pre></v></r><r><k>3</k><v><pre>4.24399e-314</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.0e-323</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>2.45339e-316</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.15e-320</pre></v></r><r><k>2</k><v><pre>1.77241e-316</pre></v></r><r><k>3</k><v><pre>1.2e-322</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.36599e-314</pre></v></r><r><k>2</k><v><pre>2.0e-323</pre></v></r><r><k>3</k><v><pre>5.09279e-313</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.2341e-316</pre></v></r><r><k>2</k><v><pre>3.2341e-316</pre></v></r><r><k>3</k><v><pre>8.48798e-314</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.0e-324</pre></v></r><r><k>2</k><v><pre>3.43758e-316</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.18594e-316</pre></v></r><r><k>2</k><v><pre>3.23412e-316</pre></v></r><r><k>3</k><v><pre>3.2341e-316</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.23076e-312</pre></v></r><r><k>2</k><v><pre>3.23411e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.0e-324</pre></v></r><r><k>2</k><v><pre>1.0e-323</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.25939e-311</pre></v></r><r><k>2</k><v><pre>4.24399e-314</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.76407e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.23411e-316</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.23411e-316</pre></v></r><r><k>3</k><v><pre>8.48798e-314</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.23434e-316</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>3.2343e-316</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.122e-314</pre></v></r><r><k>2</k><v><pre>3.23412e-316</pre></v></r><r><k>3</k><v><pre>2.122e-314</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.23415e-316</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>3.23412e-316</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>8.48798e-314</pre></v></r><r><k>2</k><v><pre>3.2341e-316</pre></v></r><r><k>3</k><v><pre>2.122e-314</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.23435e-316</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>3.23438e-316</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.122e-314</pre></v></r><r><k>2</k><v><pre>3.23454e-316</pre></v></r><r><k>3</k><v><pre>2.122e-314</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.0e-324</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>1.5e-323</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.53525e-311</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>8.48798e-314</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.49424e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.7786e-320</pre></v></r><r><k>2</k><v><pre>1.58e-321</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>1.74023e-316</pre></v></r><r><k>3</k><v><pre>2.376e-321</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.22631e-316</pre></v></r><r><k>2</k><v><pre>6.92961e-310</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.92959e-310</pre></v></r><r><k>2</k><v><pre>3.23528e-316</pre></v></r><r><k>3</k><v><pre>1.0e-323</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.0e-323</pre></v></r><r><k>2</k><v><pre>4.955e-321</pre></v></r><r><k>3</k><v><pre>3.23528e-316</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.122e-314</pre></v></r><r><k>2</k><v><pre>3.21336e-316</pre></v></r><r><k>3</k><v><pre>1.2732e-313</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>5.904e-321</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.23528e-316</pre></v></r><r><k>2</k><v><pre>1.6976e-313</pre></v></r><r><k>3</k><v><pre>2.0e-323</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.21336e-316</pre></v></r><r><k>2</k><v><pre>6.92959e-310</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.40765e-316</pre></v></r><r><k>3</k><v><pre>5.0e-323</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.21191e-316</pre></v></r><r><k>2</k><v><pre>4.24399e-314</pre></v></r><r><k>3</k><v><pre>1.9684e-320</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.3e-322</pre></v></r><r><k>2</k><v><pre>3.50911e-316</pre></v></r><r><k>3</k><v><pre>3.17907e-316</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.22847e-316</pre></v></r><r><k>2</k><v><pre>3.41331e-316</pre></v></r><r><k>3</k><v><pre>3.2353e-316</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.4e-323</pre></v></r><r><k>2</k><v><pre>1.10379e161</pre></v></r><r><k>3</k><v><pre>2.51236e-312</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.92961e-310</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>6.92961e-310</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>2.122e-314</pre></v></r><r><k>3</k><v><pre>1.74036e-316</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.0316e-320</pre></v></r><r><k>2</k><v><pre>7.1e-322</pre></v></r><r><k>3</k><v><pre>6.92961e-310</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>6.88e-321</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>6.92959e-310</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>3.23531e-316</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.23531e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>1.46636e-316</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.88e-321</pre></v></r><r><k>2</k><v><pre>3.0597e-320</pre></v></r><r><k>3</k><v><pre>2.22374e-316</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.92961e-310</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.033e-321</pre></v></r><r><k>2</k><v><pre>6.92789e-310</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.23531e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>-5.48619e303</pre></v></r><r><k>3</k><v><pre>3.23531e-316</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.23531e-316</pre></v></r><r><k>2</k><v><pre>3.23531e-316</pre></v></r><r><k>3</k><v><pre>2.122e-314</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>3.23532e-316</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.24399e-314</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.24399e-314</pre></v></r><r><k>2</k><v><pre>4.24399e-314</pre></v></r><r><k>3</k><v><pre>4.01521e-57</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>7225.0</pre></v></r><r><k>2</k><v><pre>2.3723e-319</pre></v></r><r><k>3</k><v><pre>6.403e-321</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.92959e-310</pre></v></r><r><k>2</k><v><pre>3.42122e-316</pre></v></r><r><k>3</k><v><pre>3.39519e-313</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.23647e-316</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>2.2473e-316</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.4209e-316</pre></v></r><r><k>2</k><v><pre>1.5e-323</pre></v></r><r><k>3</k><v><pre>3.42123e-316</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>3.23648e-316</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.22627e-316</pre></v></r><r><k>2</k><v><pre>1.265e-321</pre></v></r><r><k>3</k><v><pre>2.0e-323</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.42123e-316</pre></v></r><r><k>2</k><v><pre>3.0e-323</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">_u_cache_threads</span> <span class="cm-operator">=</span> [</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">Vector</span>{<span class="cm-builtin">typeof</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]))}(<span class="cm-variable">undef</span>, <span class="cm-number">1_000</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-variable">Threads</span><span class="cm-operator">.</span><span class="cm-builtin">nthreads</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">]</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">64.1&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="1c08555c-ba4d-405e-a7de-4f53656556e9"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>compute_trajectory_mean_thread_safe (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">compute_trajectory_mean_thread_safe</span>(<span class="cm-variable">u0</span>, <span class="cm-variable">p</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">solve_system_save!</span>(<span class="cm-variable">_u_cache_threads</span>[<span class="cm-variable">Threads</span><span class="cm-operator">.</span><span class="cm-builtin">threadid</span>()], <span class="cm-variable">lorenz</span>, <span class="cm-variable">u0</span>, <span class="cm-variable">p</span>, <span class="cm-number">1_000</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-builtin">mean</span>(<span class="cm-variable">_u_cache_threads</span>[<span class="cm-variable">Threads</span><span class="cm-operator">.</span><span class="cm-builtin">threadid</span>()])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">29.0&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="2fd4f919-9c75-4572-8562-879a31ad1c46"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee>threaded_out_thread_safe</assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.93763</pre></v></r><r><k>2</k><v><pre>1.94493</pre></v></r><r><k>3</k><v><pre>5.52877</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.76602</pre></v></r><r><k>2</k><v><pre>1.92914</pre></v></r><r><k>3</k><v><pre>4.08098</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.19158</pre></v></r><r><k>2</k><v><pre>5.4948</pre></v></r><r><k>3</k><v><pre>19.0344</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.29989</pre></v></r><r><k>2</k><v><pre>3.70734</pre></v></r><r><k>3</k><v><pre>10.1491</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.779284</pre></v></r><r><k>2</k><v><pre>0.774766</pre></v></r><r><k>3</k><v><pre>3.92257</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.4871</pre></v></r><r><k>2</k><v><pre>3.55044</pre></v></r><r><k>3</k><v><pre>6.23265</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.09219</pre></v></r><r><k>2</k><v><pre>2.09828</pre></v></r><r><k>3</k><v><pre>4.26471</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.38314</pre></v></r><r><k>2</k><v><pre>4.40708</pre></v></r><r><k>3</k><v><pre>15.4209</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.16537</pre></v></r><r><k>2</k><v><pre>1.16696</pre></v></r><r><k>3</k><v><pre>2.68215</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.39995</pre></v></r><r><k>2</k><v><pre>4.54709</pre></v></r><r><k>3</k><v><pre>20.9289</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.14566</pre></v></r><r><k>2</k><v><pre>1.1528</pre></v></r><r><k>3</k><v><pre>19.6559</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.70283</pre></v></r><r><k>2</k><v><pre>3.05806</pre></v></r><r><k>3</k><v><pre>8.82808</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.88958</pre></v></r><r><k>2</k><v><pre>4.91397</pre></v></r><r><k>3</k><v><pre>20.7429</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.44608</pre></v></r><r><k>2</k><v><pre>3.4601</pre></v></r><r><k>3</k><v><pre>6.37377</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.59472</pre></v></r><r><k>2</k><v><pre>6.67437</pre></v></r><r><k>3</k><v><pre>19.5191</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.56262</pre></v></r><r><k>2</k><v><pre>5.59325</pre></v></r><r><k>3</k><v><pre>16.5636</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.14146</pre></v></r><r><k>2</k><v><pre>5.20691</pre></v></r><r><k>3</k><v><pre>21.6812</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.20955</pre></v></r><r><k>2</k><v><pre>5.23754</pre></v></r><r><k>3</k><v><pre>10.9042</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.96266</pre></v></r><r><k>2</k><v><pre>2.05282</pre></v></r><r><k>3</k><v><pre>5.70578</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.80483</pre></v></r><r><k>2</k><v><pre>3.82274</pre></v></r><r><k>3</k><v><pre>11.1892</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.943875</pre></v></r><r><k>2</k><v><pre>0.942913</pre></v></r><r><k>3</k><v><pre>2.49891</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.13112</pre></v></r><r><k>2</k><v><pre>4.27792</pre></v></r><r><k>3</k><v><pre>22.4577</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.94455</pre></v></r><r><k>2</k><v><pre>3.98982</pre></v></r><r><k>3</k><v><pre>5.93371</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.22196</pre></v></r><r><k>2</k><v><pre>1.22306</pre></v></r><r><k>3</k><v><pre>4.92782</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.83238</pre></v></r><r><k>2</k><v><pre>2.84812</pre></v></r><r><k>3</k><v><pre>5.3273</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.49015</pre></v></r><r><k>2</k><v><pre>4.828</pre></v></r><r><k>3</k><v><pre>12.888</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.665518</pre></v></r><r><k>2</k><v><pre>0.663367</pre></v></r><r><k>3</k><v><pre>2.35351</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.21822</pre></v></r><r><k>2</k><v><pre>4.24967</pre></v></r><r><k>3</k><v><pre>21.6167</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.79876</pre></v></r><r><k>2</k><v><pre>1.80932</pre></v></r><r><k>3</k><v><pre>3.50224</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">threaded_out_thread_safe</span> <span class="cm-operator">=</span> <span class="cm-builtin">tmap</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">p</span> <span class="cm-operator">-&gt;</span> <span class="cm-builtin">compute_trajectory_mean_thread_safe</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ps</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">98.7&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="0e42e5c8-b690-45eb-be03-1a640020adc4"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Let's check the output now:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">7.3&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="da4a3ad9-eb52-440e-bcb6-951faffc4cdc"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee></assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">threaded_out_thread_safe</span> <span class="cm-operator">-</span> <span class="cm-variable">serial_out</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">10.0&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="81b08415-d45d-40c2-bfb7-ee82c6d10e09"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Nice, we are getting the same results as the serial approach now! How fast is it?</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">4.9&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="e586c612-bf08-4eaa-aa81-a50adc934017"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  7.201 ms (2 allocations: 23.52 KiB)
  1.804 ms (23 allocations: 25.39 KiB)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>10</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">map</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">p</span> <span class="cm-operator">-&gt;</span> <span class="cm-builtin">compute_trajectory_mean</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">$</span><span class="cm-variable">ps</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">tmap</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">p</span> <span class="cm-operator">-&gt;</span> <span class="cm-builtin">compute_trajectory_mean_thread_safe</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">$</span><span class="cm-variable">ps</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="height: 201px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">23.6&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="cb071d0a-345d-437d-9bc5-960c382e58d6"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>It's about 4 times faster! This seems reasonable since we used 4 threads here. Now on to parallelism.</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.8&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="9230f6c0-559a-11eb-20b2-452c1f5ae365"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><h1>Parallelism</h1>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">2.9&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="c4d6dc92-559b-11eb-16dc-d321bf41c2f7"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Can spaws as many tasks as we want without worrying about slow-down from context switching between cores thanks to the job scheduler running in the background.</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.1&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="ac1ba9fc-559a-11eb-334f-a9048f66eab1"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>tmap2 (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">tmap2</span>(<span class="cm-variable">f</span>, <span class="cm-variable">ps</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tasks</span> <span class="cm-operator">=</span> [<span class="cm-variable">Threads</span><span class="cm-operator">.</span><span class="cm-meta">@spawn</span> <span class="cm-builtin">f</span>(<span class="cm-variable">ps</span>[<span class="cm-variable">i</span>]) <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">1_000</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">out</span> <span class="cm-operator">=</span> [<span class="cm-builtin">fetch</span>(<span class="cm-variable">t</span>) <span class="cm-keyword">for</span> <span class="cm-variable">t</span> <span class="cm-operator">in</span> <span class="cm-variable">tasks</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">73.3&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="e1b47780-559a-11eb-377a-813f1bd260f8"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee>threaded_out_parallel</assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.93763</pre></v></r><r><k>2</k><v><pre>1.94493</pre></v></r><r><k>3</k><v><pre>5.52877</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.76602</pre></v></r><r><k>2</k><v><pre>1.92914</pre></v></r><r><k>3</k><v><pre>4.08098</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.19158</pre></v></r><r><k>2</k><v><pre>5.4948</pre></v></r><r><k>3</k><v><pre>19.0344</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.29989</pre></v></r><r><k>2</k><v><pre>3.70734</pre></v></r><r><k>3</k><v><pre>10.1491</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.779284</pre></v></r><r><k>2</k><v><pre>0.774766</pre></v></r><r><k>3</k><v><pre>3.92257</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.4871</pre></v></r><r><k>2</k><v><pre>3.55044</pre></v></r><r><k>3</k><v><pre>6.23265</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.09219</pre></v></r><r><k>2</k><v><pre>2.09828</pre></v></r><r><k>3</k><v><pre>4.26471</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.38314</pre></v></r><r><k>2</k><v><pre>4.40708</pre></v></r><r><k>3</k><v><pre>15.4209</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.16537</pre></v></r><r><k>2</k><v><pre>1.16696</pre></v></r><r><k>3</k><v><pre>2.68215</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.39995</pre></v></r><r><k>2</k><v><pre>4.54709</pre></v></r><r><k>3</k><v><pre>20.9289</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.14566</pre></v></r><r><k>2</k><v><pre>1.1528</pre></v></r><r><k>3</k><v><pre>19.6559</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.70283</pre></v></r><r><k>2</k><v><pre>3.05806</pre></v></r><r><k>3</k><v><pre>8.82808</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.88958</pre></v></r><r><k>2</k><v><pre>4.91397</pre></v></r><r><k>3</k><v><pre>20.7429</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.44608</pre></v></r><r><k>2</k><v><pre>3.4601</pre></v></r><r><k>3</k><v><pre>6.37377</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>6.59472</pre></v></r><r><k>2</k><v><pre>6.67437</pre></v></r><r><k>3</k><v><pre>19.5191</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.56262</pre></v></r><r><k>2</k><v><pre>5.59325</pre></v></r><r><k>3</k><v><pre>16.5636</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.14146</pre></v></r><r><k>2</k><v><pre>5.20691</pre></v></r><r><k>3</k><v><pre>21.6812</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>5.20955</pre></v></r><r><k>2</k><v><pre>5.23754</pre></v></r><r><k>3</k><v><pre>10.9042</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.96266</pre></v></r><r><k>2</k><v><pre>2.05282</pre></v></r><r><k>3</k><v><pre>5.70578</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.80483</pre></v></r><r><k>2</k><v><pre>3.82274</pre></v></r><r><k>3</k><v><pre>11.1892</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.943875</pre></v></r><r><k>2</k><v><pre>0.942913</pre></v></r><r><k>3</k><v><pre>2.49891</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.13112</pre></v></r><r><k>2</k><v><pre>4.27792</pre></v></r><r><k>3</k><v><pre>22.4577</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>3.94455</pre></v></r><r><k>2</k><v><pre>3.98982</pre></v></r><r><k>3</k><v><pre>5.93371</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.22196</pre></v></r><r><k>2</k><v><pre>1.22306</pre></v></r><r><k>3</k><v><pre>4.92782</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>2.83238</pre></v></r><r><k>2</k><v><pre>2.84812</pre></v></r><r><k>3</k><v><pre>5.3273</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.49015</pre></v></r><r><k>2</k><v><pre>4.828</pre></v></r><r><k>3</k><v><pre>12.888</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.665518</pre></v></r><r><k>2</k><v><pre>0.663367</pre></v></r><r><k>3</k><v><pre>2.35351</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>4.21822</pre></v></r><r><k>2</k><v><pre>4.24967</pre></v></r><r><k>3</k><v><pre>21.6167</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>1.79876</pre></v></r><r><k>2</k><v><pre>1.80932</pre></v></r><r><k>3</k><v><pre>3.50224</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">threaded_out_parallel</span> <span class="cm-operator">=</span> <span class="cm-builtin">tmap2</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">p</span> <span class="cm-operator">-&gt;</span> <span class="cm-builtin">compute_trajectory_mean_thread_safe</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ps</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">131&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="1910251a-559b-11eb-00ac-a9a34393631c"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="" mime="application/vnd.pluto.tree+object"><assignee></assignee><div><jltree class="collapsed">StaticArrays.SVector{3, Float64}<jlarray class="Array"><r><k>1</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>2</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>3</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>4</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>5</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>6</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>7</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>8</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>9</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>10</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>11</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>12</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>13</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>14</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>15</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>NaN</pre></v></r><r><k>2</k><v><pre>NaN</pre></v></r><r><k>3</k><v><pre>NaN</pre></v></r></jlarray></jltree></v></r><r><k>16</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>17</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>18</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>19</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>20</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><jlmore class="">more</jlmore></r><r><k>991</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>992</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>993</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>994</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>995</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>996</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>997</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>998</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>999</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r><r><k>1000</k><v><jltree class="collapsed">StaticArrays.SVector{3, Float64}: <jlarray class="Array"><r><k>1</k><v><pre>0.0</pre></v></r><r><k>2</k><v><pre>0.0</pre></v></r><r><k>3</k><v><pre>0.0</pre></v></r></jlarray></jltree></v></r></jlarray></jltree></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">threaded_out_parallel</span> <span class="cm-operator">-</span> <span class="cm-variable">serial_out</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">16.0&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="2ac0ba68-559b-11eb-3078-49322a8cb32c"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  5.835 ms (2 allocations: 23.52 KiB)
  1.710 ms (7004 allocations: 531.47 KiB)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>10</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">map</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">p</span> <span class="cm-operator">-&gt;</span> <span class="cm-builtin">compute_trajectory_mean</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">$</span><span class="cm-variable">ps</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">tmap2</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">p</span> <span class="cm-operator">-&gt;</span> <span class="cm-builtin">compute_trajectory_mean_thread_safe</span>(<span class="cm-meta">@SVector</span>([<span class="cm-number">1.0</span>, <span class="cm-number">0.0</span>, <span class="cm-number">0.0</span>]), <span class="cm-variable">p</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-operator">$</span><span class="cm-variable">ps</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 161px;"></div><div class="CodeMirror-gutters" style="height: 201px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">22.6&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="f4815524-559b-11eb-1cbd-abea6a6634f5"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>Hmmm, so this (dynamic scheduling) beats out our serial approach, but is still slower than our previous multi-threading approach (static scheduling). What is the task based scheduling doing in our dynamic approach? On the fly (during runtime), it's looking at the 1000 tasks we've spawned and is scheduling which 6 to run at the same time. In contrast, our static scheduling approach chooses which clump of computations to put on thread 1, the next on thread 2, etc. So this is why our approach is slower in this particular case. It's from the runtime overhead that is incurred in the dynamic approach.</p>
<p>So how can we determine which method to use for our particular problem. In this parameter seach example, each thread is doing roughly the same amount of work. The time it takes to do our compuation with the 13th parameter is the same as the time it takes for the 998th. Because of this, it makes sense to just go with the static approach of spreading (# of parameters / # of theads) to each thread since know all of this ahead of time. Let's look at what happens when this is not the case:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">4.9&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="b76bc602-559d-11eb-2ff1-4b49e79bc499"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>sleepmap_static (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>7</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">sleepmap_static</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">out</span> <span class="cm-operator">=</span> <span class="cm-builtin">Vector</span>{<span class="cm-variable">Int</span>}(<span class="cm-variable">undef</span>, <span class="cm-number">24</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Threads</span><span class="cm-operator">.</span><span class="cm-meta">@threads</span> <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">24</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">sleep</span>(<span class="cm-variable">i</span><span class="cm-operator">/</span><span class="cm-number">10</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">out</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">i</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">end</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="height: 155px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">112&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="df07baba-559d-11eb-0be5-87a6f9fae35d"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>isleep (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>1</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-def">isleep</span>(<span class="cm-variable">i</span>) <span class="cm-operator">=</span> (<span class="cm-builtin">sleep</span>(<span class="cm-variable">i</span><span class="cm-operator">/</span><span class="cm-number">10</span>); <span class="cm-variable">i</span>)</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="height: 63px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">29.4&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="f775a6d4-559d-11eb-266d-87e32efbdb86"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y " mime="text/plain"><assignee></assignee><div><pre><code>sleep_dynamic (generic function with 1 method)</code></pre></div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">sleep_dynamic</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tasks</span> <span class="cm-operator">=</span> [<span class="cm-variable">Threads</span><span class="cm-operator">.</span><span class="cm-meta">@spawn</span>(<span class="cm-builtin">isleep</span>(<span class="cm-variable">i</span>)) <span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-operator">in</span> <span class="cm-number">1</span><span class="cm-operator">:</span><span class="cm-number">24</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">out</span> <span class="cm-operator">=</span> [<span class="cm-builtin">fetch</span>(<span class="cm-variable">t</span>) <span class="cm-keyword">for</span> <span class="cm-variable">t</span> <span class="cm-operator">in</span> <span class="cm-variable">tasks</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">54.2&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="f23d1fde-559e-11eb-1c11-e1773d10ca9f"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>In this example, we are creating an array [1, 2, ..., 24] in a staticly scheduled vs. dynamically scheduled way. Let's check out the result:</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">3.3&nbsp;μs</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="" id="1a96f390-559e-11eb-3bab-2b9f1d01428f"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div>		<style>
div.PlutoUI_terminal {
    border: 10px solid #cedbd0; /* https://www.vintagecomputer.net/browse_thread.cfm?id=618 */
    border-radius: 15px;
    font-size: .65rem;
    background-color: #333;
    max-height: 300px;
    overflow: auto;
}
div.PlutoUI_terminal pre {
    color: #ddd;
    background-color: transparent;
    margin-block-end: 0;
    height: auto;
    white-space: pre-wrap;
    word-wrap: break-word;
}

div.PlutoUI_terminal pre.err {
    color: #ff5f5f;
}
</style>

        <div class="PlutoUI_terminal">
            <pre>  12.911 s (146 allocations: 5.92 KiB)
  2.401 s (284 allocations: 15.33 KiB)
</pre>
            
        </div>
    </div></pluto-output><pluto-input><button class="delete_cell" title="Delete cell"><span></span></button><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5px; left: 34px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 30px; margin-bottom: -10px; border-right-width: 40px; min-height: 23px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 15.3333px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">with_terminal</span>() <span class="cm-keyword">do</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">sleepmap_static</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-meta">@btime</span> <span class="cm-builtin">sleep_dynamic</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -30px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">end</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 40px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="height: 109px; left: 0px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></pluto-input><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">72.7&nbsp;s</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="192c1366-559f-11eb-027d-c5e1c8168675"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="rich_output " mime="text/html"><assignee></assignee><div><div class="markdown"><p>In this case, the dynamic approch is much faster! Why is this the case? Because the static approach junks our jobs in a linear fashion. For our four threads, thread 1 works on i=1-6, thread 2 on i=7-12, thread 3 on i=13-18, and thread 4 on i=19-24. In this case, not all threads will finish in the same amount of time. It increases by i/10, so thread 4 will actually take <code>sum(i/10 for i in 19:24) =</code> 12.9 seconds, as we can see above!</p>
<p>In contrast, our dynamic scheduler can actively choose which jobs get assigined to which threads, such that no one thread is given all of the slow jobs. Interestingly, the total time to run using this approach is actually faster than any grouping of six timings that we would assign to a thread. This is because parallelism also takes advantage of concurrency so that those groupings of 6 computations don't need to wait one at a time to run on a given thread. Sweet!</p>
<p>So to recap, static scheduling is great when you know the runtime of each job ahead of time, dynamic is great otherwise.</p>
</div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">22.0&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell><pluto-cell class="code_folded " id="8b6135cb-32a9-4849-8fde-e6d8b49a4fc9"><pluto-shoulder draggable="true" title="Drag to move cell"><button class="foldcode" title="Show/hide code"><span></span></button></pluto-shoulder><pluto-trafficlight></pluto-trafficlight><button class="add_cell before" title="Add cell"><span></span></button><pluto-output class="scroll_y rich_output " mime="text/plain"><assignee></assignee><div></div></pluto-output><pluto-runarea><button class="runcell" title="Run"><span></span></button><span class="runtime">156&nbsp;ms</span></pluto-runarea><button class="add_cell after" title="Add cell"><span></span></button></pluto-cell></pluto-notebook><dropruler></dropruler></main>
                <svg id="MJX-SVG-global-cache" style="display: none;"><defs></defs></svg>
            </body>
            </html>
        
